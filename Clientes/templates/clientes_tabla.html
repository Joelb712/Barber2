{% load static %}

<table id="listacli" class="min-w-full divide-y divide-gray-200">
        <thead class="bg-slate-700">
            <tr>
            <th class="px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">Nombre</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">Apellido</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">DNI</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">Tel茅fono</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">Estado</th>
            <th class="px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider">Acciones</th>
            </tr>
        </thead>
        <tbody class="bg-gray-300 divide-y divide-gray-200">
            {% for c in clientes %}
            <tr data-pk="{{ c.pk }}" class="{% if not c.activo %}inactivo{% endif %}  hover:bg-amber-100">
            <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-black">{{ c.first_name }}</td>
            <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-black">{{ c.last_name }}</td>
            <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-black">{{ c.dni }}</td>
            <td class="px-4 py-3 whitespace-nowrap text-sm font-medium text-black">{{ c.telefono }}</td>
            <td class="px-4 py-3 whitespace-nowrap">
                <span class="px-2 inline-flex text-sm leading-5 font-semibold rounded-full 
                {% if c.activo %}bg-green-100 text-green-800{% else %}bg-red-100 text-red-800{% endif %}">
                {{ c.activo|yesno:"Activo,Inactivo" }}
                </span>
            </td>
            <td class="px-4 py-3 whitespace-nowrap text-m font-medium">
                <button class="btnEditar text-yellow-600 hover:text-yellow-800 mr-2">
                <i class="fas fa-edit"></i>
                </button>
                <button class="btnEliminar text-red-600 hover:text-red-800">
                <i class="fas fa-trash"></i>
                </button>
            </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
<script>
   
    $(document).ready(function () {
        //  Inicializaci贸n de DataTables 
        $('#listacli').DataTable({
            // Habilita la paginaci贸n, ordenaci贸n y b煤squeda
            paging: true,
            searching: true,
            ordering: true,

            order: [[1, 'desc']], 
            
            // Opciones de paginaci贸n: (10, 20, 50 y All)
            lengthMenu: [
                [10, 20, 50, -1],
                [10, 20, 50, "Todos"]
            ],
            
            // Idioma en espa帽ol
            language: {
                url: "//cdn.datatables.net/plug-ins/1.10.25/i18n/Spanish.json"
            },
            responsive: true,
            dom: '<"flex justify-between items-center mb-4"Blf><"overflow-x-auto"rt><"flex justify-between items-center mt-4"ip>',
            buttons: [
            {
                extend: 'excelHtml5',
                text: 'Excel',
                title: 'Reporte de Clientes',
                exportOptions: {
                    // Exporta columnas 0, 1, 2, 3, 4 (Excluye la Columna 5: Acciones)
                    columns: [0, 1, 2, 3, 4] 
                }
            },
            // Bot贸n para PDF (requiere PDFMake)
            {
                extend: 'pdfHtml5',
                text: 'PDF',
                title: 'Reporte de Clientes',
                orientation: 'landscape',
                exportOptions: {
                    //  Excluye la Columna 5 (Acciones) 
                    columns: [0, 1, 2, 3, 4] 
                },
                customize: function (doc) {
                    doc.content[1].table.widths = Array(doc.content[1].table.body[0].length + 1).join('*').split('');
                }
            },
        ]
            
            // Clase de tabla de Tailwind CSS para evitar conflicto de estilos.
            // DataTables es inteligente y generalmente solo a帽ade su funcionalidad.
            // Aseg煤rate que tu CSS ya maneje el estilo de la tabla.
            // La clase 'min-w-full' que ya tienes es suficiente.
        });
    });
</script>