{% load static %}
<!-- templates/base.html -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}Fede BarberShop{% endblock %}</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

  <!-- Tu CSS personalizado (si defines estilos como .glass, asegúrate de tenerlos aquí) -->
  <link rel="stylesheet" href="{% static 'css/base.css' %}"> 

</head>
<body class="min-h-screen flex flex-col justify-between font-poppins">
  <!-- Header fijo -->
  <header class="fixed top-0 left-0 w-full z-50 glass px-6 py-4 shadow-md">
  <div class="flex justify-between items-center">
    <!-- Logo -->
    <h1 class="text-2xl font-bold text-white">
      <a href="{% url 'Inicio' %}" class="hover:text-yellow-300 transition">Barber Studio</a>
    </h1>

    <!-- Botón hamburguesa -->
    <button id="menu-btn" class="text-white md:hidden focus:outline-none focus:ring-2 focus:ring-yellow-400 p-2 rounded">
      <!-- ícono hamburguesa -->
      <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>

    <!-- Navegación principal -->
    <nav id="menu" class="hidden md:block">
      <ul class="flex flex-col md:flex-row items-center gap-4 md:gap-6 text-sm font-medium text-white">
        <li><a href="#servicios" class="hover:text-yellow-500 transition">Servicios</a></li>
        <li><a href="#productos" class="hover:text-yellow-500 transition">Productos</a></li>
        <li><a href="#nosotros" class="hover:text-yellow-500 transition">Nosotros</a></li>
        <li><a href="#reserva" class="hover:text-yellow-500 transition">Reserva</a></li>
        <li><a id="divContacto" href="#" class="hover:text-yellow-500 transition">Contacto</a></li>

        {% if user.is_authenticated %}
          <li><a href="{% url 'dash' %}" class="hover:text-yellow-500 transition">Dash</a></li>
          {% if request.user.is_superuser %}
            <li><a href="{% url 'admin:index' %}" class="hover:text-yellow-500 transition">Administrador</a></li>
          {% endif %}
          <li class="flex items-center gap-3">
            <span class="text-yellow-400 font-semibold whitespace-nowrap">Hola, {{ user.first_name|default:user.username }}</span>
            <form method="post" action="{% url 'logout' %}" class="m-0 p-0">
              {% csrf_token %}
              <button type="submit"
                class="bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded text-sm font-medium transition duration-200 w-full md:w-auto">
                Cerrar sesión
              </button>
            </form>
          </li>
        {% else %}
          <li>
            <a href="{% url 'login' %}" class="bg-yellow-500 hover:bg-yellow-600 text-black px-4 py-1.5 rounded font-semibold text-sm transition duration-200">
              Iniciar sesión
            </a>
          </li>
        {% endif %}
      </ul>
    </nav>
  </div>

  <!-- Menú desplegable (solo visible en móvil) -->
  <div id="mobile-menu" class="hidden md:hidden mt-3 bg-black/60 backdrop-blur-xl rounded-xl p-4">
    <ul class="flex flex-col items-center gap-4 text-white text-sm font-medium">
      <li><a href="#servicios" class="hover:text-yellow-400 transition">Servicios</a></li>
      <li><a href="#productos" class="hover:text-yellow-400 transition">Productos</a></li>
      <li><a href="#nosotros" class="hover:text-yellow-400 transition">Nosotros</a></li>
      <li><a href="#reserva" class="hover:text-yellow-400 transition">Reserva</a></li>
      <li><a id="divContacto" href="#" class="hover:text-yellow-400 transition">Contacto</a></li>

      {% if user.is_authenticated %}
        <li><a href="{% url 'dash' %}" class="hover:text-yellow-400 transition">Dash</a></li>
        {% if request.user.is_superuser %}
          <li><a href="{% url 'admin:index' %}" class="hover:text-yellow-400 transition">Administrador</a></li>
        {% endif %}
        <li class="text-center">
          <form method="post" action="{% url 'logout' %}">
            {% csrf_token %}
            <button type="submit" class="bg-red-600 hover:bg-red-700 text-white px-4 py-1.5 rounded text-sm font-medium transition duration-200 w-full">
              Cerrar sesión
            </button>
          </form>
        </li>
      {% else %}
        <li>
          <a href="{% url 'login' %}" class="bg-yellow-500 hover:bg-yellow-600 text-black px-5 py-2 rounded font-semibold text-sm transition duration-200 w-full text-center block">
            Iniciar sesión
          </a>
        </li>
      {% endif %}
    </ul>
  </div>
</header>

  <!-- Contenido principal -->
  <main class="flex-grow pt-24"> <!-- pt-24 para compensar el header fijo (~96px) -->
    <div class="content-area" id="main-content">
      {% block content %}{% endblock %}
    </div>
  </main>

  <!-- Footer global opcional -->
  {% block footer %}{% endblock %}

  <!-- Scripts comunes -->
  {% block scripts %}{% endblock %}
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/6.0.4/bootbox.all.min.js"></script>

  <!-- NOTA: Eliminé los scripts de Bootstrap y MDB porque ya no usamos sus clases -->
  <!-- Si usás modales de Bootstrap en otras vistas, deberás reemplazarlos por modales en Tailwind o Alpine.js -->

  <script>
    function cargarContenido(url) {
      $.ajax({
          url: url,
          method: 'GET',
          headers: { 'X-Requested-With': 'XMLHttpRequest' },
          xhrFields: { withCredentials: true },
          success: function(respuesta, status, jqXHR) {
            if (typeof respuesta === 'string' && (respuesta.includes('<html') || respuesta.includes('<head'))) {
                window.location.href = url;
                return;
            }
            if (respuesta.includes('name="username"') && respuesta.includes('name="password"')) {
                window.location.href = "{% url 'login' %}";
                return;
            }
            $('#main-content').html(respuesta);
          },
          error: function(error) {
              console.error('Error:', error);
          }
      });
    }

    $(document).ready(function() {
      $('#divContacto').on('click', function(e) {
        e.preventDefault();
        cargarContenido("{% url 'contacto' %}");
        return false;
      });
    });
  </script>

  <script>
    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');

    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
      menuBtn.classList.toggle('open');
    });
</script>
  <!-- Tu script de reserva sigue comentado, intacto -->
  <!--
  <script>
  ... (todo igual)
  </script>
  -->

</body>
</html>